<!--trigger new2 28 nov 2025  OPT3  idee chinees koekje voor nieuwjaar onthoud! -->

<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Glunder ‚Äî Countdown</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;700&family=Playfair+Display:ital,wght@0,700;1,700&display=swap" rel="stylesheet">
<style>
  :root{
    --olive:#0b2b20;
    --olive-panel:#153a2c;
    --gold:#ffd766;
    --beige:#efe6cf;
    --card-bg: rgba(255,255,255,0.94);
    --accent:#e6b46a;
    --moon-overlay: rgba(255, 250, 230, 0.12);
    --num-green: #07321f;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:'Cormorant Garamond',serif;background: linear-gradient(180deg,#061717 0%, #0f2d25 40%, #122d20 100%); color:var(--beige); -webkit-font-smoothing:antialiased;}
  .page {min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px;}

  /* Poster container */
  .poster {
    width:min(1100px,96%);
    border-radius:16px;
    padding:18px;
    display:grid;
    grid-template-columns: 1fr 440px;
    gap:20px;
    position:relative;
    overflow:hidden;
    background: linear-gradient(180deg, rgba(6,18,14,0.45), rgba(10,18,14,0.15));
    border: 1px solid rgba(255,215,130,0.03);
    box-shadow: 0 24px 60px rgba(0,0,0,0.7);
  }

  /* Decorative ornate corners using uploaded art as overlay (faded) */
  .ornaments {
    pointer-events:none;
    position:absolute; inset:6px; border-radius:12px;
    background-image: url('/mnt/data/A_2D_digital_graphic_design_titled_"Countdown_Glun.png');
    background-size: cover;
    background-position: center;
    opacity: 0.06;
    mix-blend-mode: screen;
    filter: hue-rotate(10deg) saturate(0.6) brightness(0.9);
  }

  .left { padding:18px; display:flex; flex-direction:column; gap:18px; }
  .right { padding:18px; display:flex; flex-direction:column; gap:18px; }

  /* Timer card */
  .timer-card {
    background: linear-gradient(180deg, var(--olive-panel), #123a2a);
    padding:22px;
    border-radius:14px;
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    box-shadow: 0 14px 36px rgba(0,0,0,0.65), inset 0 -10px 24px rgba(255,215,130,0.02);
    position:relative;
    min-height:260px;
    border: 1px solid rgba(255,215,130,0.03);
  }

  .time-label {
    font-size:13px;
    color: rgba(255,245,210,0.8);
    letter-spacing:0.06em;
    margin-bottom:8px;
  }

  /* Moon: show uploaded image, overlay, big number inside */
  .moon {
    width:260px;
    height:260px;
    border-radius:50%;
    background-image: url('/mnt/data/A_2D_digital_graphic_design_titled_"Countdown_Glun.png');
    background-size: cover;
    background-position: center;
    position:relative;
    display:flex;align-items:center;justify-content:center;
    box-shadow: 0 10px 40px rgba(0,0,0,0.7), 0 0 28px rgba(255,220,120,0.04) inset;
    border: 3px solid rgba(255,215,130,0.06);
    overflow:visible;
  }

  /* subtle light overlay on moon to increase contrast for number */
  .moon::after{
    content:'';
    position:absolute; inset:0; border-radius:50%;
    background: linear-gradient(rgba(255,255,245,0.06), rgba(255,255,240,0.04));
    mix-blend-mode: screen;
    pointer-events:none;
  }

  /* moon number: green, large, with gold glow */
  .moon .num {
    font-family:'Playfair Display', serif;
    font-size: clamp(48px, 10vw, 120px);
    color: var(--num-green); /* groen cijfer in maan */
    font-weight:700;
    text-shadow:
      0 0 22px rgba(255,215,120,0.22),
      0 2px 0 rgba(0,0,0,0.35);
    transform: translateY(-6px);
    z-index:2;
    line-height:1;
  }
  .moon .label {
    position:absolute; bottom:10px; width:100%; text-align:center; color: rgba(255,248,225,0.9); font-size:13px;
  }

  /* After (celebration) */
  .after { display:none; text-align:center; }
  .after h1 { font-family:'Playfair Display', serif; font-style:italic; font-weight:700; color:var(--gold); font-size:clamp(28px,5.6vw,64px); text-shadow: 0 0 18px rgba(255,240,180,0.45); margin:0; }
  .after p { margin:8px 0 0 0; color: #fff2d3; font-style:italic; }

  /* Horoscope panel */
  .panel { background: rgba(255,255,255,0.94); border-radius:12px; padding:14px; box-shadow: 0 8px 24px rgba(0,0,0,0.45); color:#14321f; }
  .horoscope { display:flex; gap:12px; align-items:center; }
  .sign-badge { width:78px; height:78px; border-radius:12px; display:flex;flex-direction:column;align-items:center;justify-content:center; background: linear-gradient(180deg,#f1f6ea,#eef8e8); color:#112e21; border:2px solid rgba(40,60,40,0.08); font-weight:700; }
  .sign-symbol { font-size:22px; }
  .sign-name { margin-top:6px; font-size:12px; text-transform:uppercase; font-weight:700; color:#122d20; }
  .horoscope-text h3 { margin:0; font-size:18px; color:#0f3b28; }
  .horoscope-text p { margin:6px 0 0; color:#263b32; font-size:15px; }

  .controls { display:flex; gap:8px; margin-top:12px; flex-wrap:wrap; }

  /* Right: games */
  .game-area { display:flex;flex-direction:column;gap:12px;align-items:center;justify-content:center; min-height:200px; }
  .game-title { font-style:italic; font-weight:700; color:var(--beige); margin-bottom:8px; font-size:20px; }

  /* Buttons */
  .btn { background:var(--gold); color:#2b2416; border:none; padding:8px 12px; border-radius:8px; cursor:pointer; font-weight:700; box-shadow:0 6px 10px rgba(200,150,60,0.12); }

  /* Memory */
  .memory-grid { display:grid; grid-template-columns: repeat(4, 1fr); gap:10px; width:100%; }
  .card { background: linear-gradient(180deg,#f5f7ee,#fbfff8); border-radius:10px; height:90px; display:flex;align-items:center;justify-content:center; cursor:pointer; color:#102b20; font-weight:700; box-shadow: 0 8px 18px rgba(0,0,0,0.25); }
  .card.revealed { background:#fffbe8; }
  .card.matched { opacity:0.45; transform:scale(0.98); cursor:default; }

  /* Puzzle: green background, beige title text */
  .puzzle-wrap { background: linear-gradient(180deg,#0b3a2c,#0a3326); padding:12px; border-radius:10px; display:flex;flex-direction:column;align-items:center; gap:10px; }
  .puzzle-board { width:320px; height:320px; display:grid; grid-template-columns:repeat(3,1fr); gap:6px; background: rgba(0,0,0,0.03); padding:10px; border-radius:8px; }
  .tile { border-radius:6px; background-size: 320px 320px; background-position:center; display:flex;align-items:center;justify-content:center; cursor:pointer; box-shadow: inset 0 -6px 14px rgba(0,0,0,0.08); transition: transform 220ms ease, box-shadow 220ms ease; }
  .tile:hover { transform: translateY(-6px); box-shadow: 0 18px 30px rgba(0,0,0,0.45); }
  .tile.empty { background: linear-gradient(180deg,#062117,#08281f); }

  /* Sudoku 6x6 */
  .sudoku-grid { display:grid; grid-template-columns: repeat(6, 1fr); gap:8px; width:100%; max-width:420px; padding:12px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:10px; position:relative; }
  .sudoku-grid::before, .sudoku-grid::after { content:''; position:absolute; background:rgba(255,215,130,0.22); }
  .sudoku-grid::before { width:4px; height:100%; left:50%; top:0; transform:translateX(-2px); border-radius:2px; }
  .sudoku-grid::after { height:4px; width:100%; top:50%; left:0; transform:translateY(-2px); border-radius:2px; }
  .sudoku-cell { background:#fff; border-radius:8px; padding:8px; display:flex;align-items:center;justify-content:center; font-weight:700; font-size:18px; color:#122d20; box-shadow: 0 6px 12px rgba(0,0,0,0.08); }
  .sudoku-cell.prefilled { background:#f3f6ed; color:#122d20; }
  .sudoku-cell input { width:100%;height:100%;text-align:center;border:0;outline:none;font-size:18px;background:transparent; }

  .sudoku-controls { display:flex; gap:8px; justify-content:center; margin-top:8px; }

  /* Confetti */
  .confetti { position:fixed; left:0; top:0; width:100%; height:100%; pointer-events:none; overflow:hidden; z-index:9999; display:none; }

  @media(max-width:980px){
    .poster { grid-template-columns: 1fr; padding:14px; }
    .right { order:3; }
    .moon{ width:170px; height:170px; }
    .puzzle-board { width:260px; height:260px; background-size:260px 260px; }
  }
</style>
</head>
<body>
<div class="page">
  <div class="poster" role="main" aria-label="Glunder poster">
    <div class="ornaments" aria-hidden="true"></div>

    <!-- LEFT -->
    <div class="left">
      <div class="timer-card" aria-live="polite">
        <div class="time-label">Countdown</div>

        <!-- Moon (uploaded image used) -->
        <div class="moon" role="img" aria-label="Maan met aftelcijfer">
          <div class="num" id="moonNumber">‚Ä¶</div>
          <div class="label" id="moonLabel">nachtjes</div>
        </div>

        <!-- After block shown after countdown -->
        <div class="after" id="afterBlock" role="status" aria-hidden="true">
          <h1>Vandaag is het eindelijk zover!</h1>
          <p>Vandaag weer samen</p>
          <p>Vandaag dichtbij, Glunder üßúüèª‚Äç‚ôÄÔ∏è‚ú®</p>
        </div>

        <div class="time-caption">Amsterdam ‚Äî 28 november 19:30</div>
      </div>

      <!-- Horoscope -->
      <div class="panel" style="margin-top:12px;">
        <div class="horoscope">
          <div class="sign-badge" id="signBadge">
            <div class="sign-symbol" id="signSymbol">‚ôà</div>
            <div class="sign-name" id="signShort">Ram</div>
          </div>
          <div class="horoscope-text">
            <h3 id="signName">Ram</h3>
            <p id="signQuote">Je quote verschijnt hier‚Ä¶</p>
          </div>
        </div>

        <div class="controls">
          <button class="btn" id="prevSign">‚Üê Vorige</button>
          <button class="btn" id="nextSign">Volgende ‚Üí</button>
          <button class="btn" id="randomSign">Willekeurig</button>
        </div>
      </div>
    </div>

    <!-- RIGHT -->
    <div class="right">
      <div class="panel game-area" aria-label="Spel-sectie">
        <div id="gameTitle" class="game-title">Glunder Sudoku</div>
        <div id="gameArea" style="width:100%;display:flex;flex-direction:column;align-items:center;gap:12px;min-height:160px;justify-content:center"></div>

        <div style="display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-top:6px;">
          <button class="btn" id="prevGame">‚Üê Vorig spel</button>
          <button class="btn" id="nextGame">Volgend spel ‚Üí</button>
          <button class="btn" id="shuffleGame">Shuffle spel</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Confetti container -->
<div class="confetti" id="confetti"></div>

<script>
/* ========================
   Countdown logic (days)
   ======================== */
const target = new Date('2025-11-28T19:30:00+01:00').getTime();
const moonNumber = document.getElementById('moonNumber');
const moonLabel = document.getElementById('moonLabel');
const afterBlock = document.getElementById('afterBlock');
const timeLabel = document.querySelector('.time-label');

function updateCountdown(){
  const now = Date.now();
  const diff = target - now;
  if (diff > 0){
    const days = Math.floor(diff/(1000*60*60*24));
    moonNumber.textContent = days;
    moonLabel.textContent = days === 1 ? 'nacht' : 'nachtjes';
    afterBlock.style.display = 'none';
    document.querySelector('.moon').style.display = 'flex';
    timeLabel.textContent = 'Countdown';
  } else {
    document.querySelector('.moon').style.display = 'none';
    afterBlock.style.display = 'block';
    timeLabel.textContent = 'Vandaag!';
    clearInterval(cntInterval);
    // celebration
    showConfetti();
  }
}
updateCountdown();
const cntInterval = setInterval(updateCountdown, 1000);

/* ========================
   Horoscopes (12x8) + symbols
   (kept identical to prior lists)
   ======================== */
const horoscopes = [
  {sign:"Ram", symbol:"‚ôà", color:"#d6e9c9", quotes:[
    "Je hart klopt sneller van verwachting.",
    "Je durft ‚Äî en dat maakt het spannend mooi.",
    "Een kleine daad zet een avond in beweging.",
    "Je glimlach nodigt iemand dichterbij.",
    "Vandaag straal je met zachte overgave.",
    "Laat je energie zachtjes de kamer vullen.",
    "Iemand merkt je warmte op zonder woorden.",
    "Durf te glunderen ‚Äî het past je goed."
  ]},
  {sign:"Stier", symbol:"‚ôâ", color:"#e7edd6", quotes:[
    "Comfort en smaak maken dit moment kostbaar.",
    "Een rustige aanwezigheid geeft diepe rust.",
    "Geniet van de tastbare details om je heen.",
    "Vandaag voelt nabijheid als een cadeau.",
    "Subtiele aanraking zegt meer dan menig woord.",
    "Laat je zintuigen rustig de weg wijzen.",
    "Een bekend lied roept zachte herinnering op.",
    "Eenvoudige luxe kleedt jouw momenten."
  ]},
  {sign:"Tweelingen", symbol:"‚ôä", color:"#d9efd9", quotes:[
    "Je praatjes openen kleine werelden van plezier.",
    "Humor maakt een kamer lichter en zachter.",
    "Een nieuwsgierige vraag start een hartelijk gesprek.",
    "Je woorden dansen licht in de lucht.",
    "Verrassing in taal brengt een glimlach.",
    "Laat je geest speels de avond kleuren.",
    "Korte gesprekken kunnen diepe connecties brengen.",
    "Je charme werkt als een zachte uitnodiging."
  ]},
  {sign:"Kreeft", symbol:"‚ôã", color:"#e7e6d7", quotes:[
    "Zachtheid en aandacht scheppen een thuisgevoel.",
    "Een warme blik zegt wat woorden niet hoeven.",
    "Koester kleine momenten van echte verbinding.",
    "Je zorgzame aard opent stil gedeelde ruimte.",
    "Herinneringen vinden vanavond een zachte plek.",
    "Je aanwezigheid voelt als een geruststellende omhelzing.",
    "Laat tederheid de avond verlichten.",
    "Intimiteit groeit in kleine, stille gebaren."
  ]},
  {sign:"Leeuw", symbol:"‚ôå", color:"#efe7c8", quotes:[
    "Je helderheid trekt bewondering zonder moeite.",
    "Vandaag zal je lach de kamer doen oplichten.",
    "Stralend en zacht ‚Äî je bent onmiskenbaar aanwezig.",
    "Een compliment weerkaatst jouw warme energie.",
    "Je durft te schitteren op een elegante manier.",
    "Grootsheid met tederheid is jouw stijl vandaag.",
    "Laat je hart spreken ‚Äî het klinkt als muziek.",
    "Een klein applausje kan onverwacht veel betekenen."
  ]},
  {sign:"Maagd", symbol:"‚ôç", color:"#eef3e0", quotes:[
    "Oog voor detail maakt kleine magie zichtbaar.",
    "Je zorgvuldigheid tovert orde tot rust.",
    "Subtiele perfecties geven de avond inhoud.",
    "Je praktische aanraking voelt als blijk van zorg.",
    "Nette aandacht cre√´ert warme herinnering.",
    "Stilheid met zorg kan veel liefde zeggen.",
    "Je precisie vertaalt zich in elegante momenten.",
    "Een kleine handeling oogst grote waardering."
  ]},
  {sign:"Weegschaal", symbol:"‚ôé", color:"#dfe7d2", quotes:[
    "Schoonheid en evenwicht dansen langs je heen.",
    "Een charmante opmerking opent zachte ogen.",
    "Balans brengt ruimte voor oprechte gesprekken.",
    "Je elegantie nodigt mensen uit dichtbij te komen.",
    "Rust en stijl maken vanavond memorabel.",
    "Zachte humor weeft fijne herinneringen in de tijd.",
    "Jouw eenvoud ademt een bijzondere allure.",
    "Harmonie kleurt de avond in goudtinten."
  ]},
  {sign:"Schorpioen", symbol:"‚ôè", color:"#e9e5d8", quotes:[
    "Intensiteit en zachtheid vinden elkaar bij jou.",
    "Een scherpe blik kan heel veel zeggen vandaag.",
    "Laat je diepgang zachtjes naar buiten stromen.",
    "Intieme aandacht schept onvergetelijke momenten.",
    "Een geheim gebaar heeft grote betekenis vanavond.",
    "Diepe gevoelens vertalen zich in warme daden.",
    "Laat je hart spreken ‚Äî in stilte of in woord.",
    "Passie met tederheid maakt alles eerbiedig."
  ]},
  {sign:"Boogschutter", symbol:"‚ôê", color:"#e8efd9", quotes:[
    "Avontuurlijke vonken maken de avond licht.",
    "Een onbevangen lach opent onverwachte deuren.",
    "Nieuwsgierigheid leidt tot warme verrassingen.",
    "Speelsheid nodigt anderen uit te delen.",
    "Durf te stappen; mooie herinneringen wachten.",
    "Recht door zee met een glimlach wint harten.",
    "Laat enthousiasme zacht de ruimte vullen.",
    "Een lichte grap breekt het ijs in goud."
  ]},
  {sign:"Steenbok", symbol:"‚ôë", color:"#e6e3d6", quotes:[
    "Stabiel en attent ‚Äî jouw houding raakt anderen.",
    "Doorzettingsvermogen krijgt een zachte glans vanavond.",
    "Doordachte woorden geven houvast en nabijheid.",
    "Je inzet cre√´ert waardevolle momenten.",
    "Een rustige daad blijkt groter dan verwacht.",
    "Consistentie voelt als een warm anker voor anderen.",
    "Je vastberadenheid toont zich als zorg en stijl.",
    "Met bedachtzaamheid bouw je intieme ruimte."
  ]},
  {sign:"Waterman", symbol:"‚ôí", color:"#e9f0e7", quotes:[
    "Je verrassende blik cre√´ert nieuwe mogelijkheden.",
    "Vernieuwend en vriendelijk ‚Äî een aanstekelijke mix.",
    "Durf uniek te zijn; anderen volgen je graag.",
    "Een origineel idee kan het gesprek verrijken.",
    "Jouw visie nodigt uit tot open gesprekken.",
    "Creatieve vonken kleuren de avond met plezier.",
    "Anders zijn voelt vandaag als een zachte kracht.",
    "Vreemde wendingen leiden soms tot warme momenten."
  ]},
  {sign:"Vissen", symbol:"‚ôì", color:"#edf6e9", quotes:[
    "Zacht en dromerig ‚Äî je brengt rust in het nu.",
    "Een intu√Øtieve beweging verbindt twee zielen.",
    "Dromen en realiteit vinden vanavond elkaar.",
    "Laat je verbeelding leiden naar warme herinneringen.",
    "Een kleine fantasie wordt tastbare zachtheid.",
    "Je empathie maakt nabijheid veilig en rijk.",
    "Mildheid en diepte vormen een stille belofte.",
    "Eenvoudige dromen worden vanavond kostbaar."
  ]}
];

let signIndex = 0;
const signBadge = document.getElementById('signBadge');
const signSymbol = document.getElementById('signSymbol');
const signShort = document.getElementById('signShort');
const signName = document.getElementById('signName');
const signQuoteEl = document.getElementById('signQuote');

function showSign(idx){
  signIndex = (idx + horoscopes.length) % horoscopes.length;
  const obj = horoscopes[signIndex];
  const now = new Date();
  const daySeed = now.getFullYear()*10000 + (now.getMonth()+1)*100 + now.getDate();
  const quoteIdx = (daySeed + signIndex) % obj.quotes.length;
  signSymbol.textContent = obj.symbol;
  signShort.textContent = obj.sign;
  signBadge.style.background = `linear-gradient(180deg, ${obj.color}, #fff7e6)`;
  signName.textContent = obj.sign;
  signQuoteEl.textContent = obj.quotes[quoteIdx];
}
showSign(0);
document.getElementById('nextSign').addEventListener('click', ()=> showSign(signIndex+1));
document.getElementById('prevSign').addEventListener('click', ()=> showSign(signIndex-1));
document.getElementById('randomSign').addEventListener('click', ()=> showSign(Math.floor(Math.random()*horoscopes.length)));

/* ========================
   Games: order, title & init
   ======================== */
const gameArea = document.getElementById('gameArea');
const gameTitle = document.getElementById('gameTitle');
const games = ['sudoku','puzzle','memory'];
let currentGame = 0;
document.getElementById('nextGame').addEventListener('click', ()=> setGame(currentGame+1));
document.getElementById('prevGame').addEventListener('click', ()=> setGame(currentGame-1));
document.getElementById('shuffleGame').addEventListener('click', ()=> initCurrentGame());

function setGame(i){
  currentGame = ((i % games.length) + games.length) % games.length;
  initCurrentGame();
}
function initCurrentGame(){
  const name = games[currentGame];
  if (name === 'sudoku') gameTitle.textContent = 'Glunder Sudoku';
  else if (name === 'puzzle') gameTitle.textContent = 'Glunder Schuifpuzzel';
  else if (name === 'memory') gameTitle.textContent = 'Glunder Memory';
  gameArea.innerHTML = '';
  if (name === 'memory') initMemory();
  else if (name === 'puzzle') initPuzzle();
  else if (name === 'sudoku') initSudoku();
}

/* ------------------------
   Asset: use the uploaded supermoon image as base (same path)
   ------------------------ */
const supermoonURL = '/mnt/data/A_2D_digital_graphic_design_titled_"Countdown_Glun.png';

/* ---- Memory (uses the supermoon + color shifts for variety) ---- */
function initMemory(){
  const wrapper = document.createElement('div'); wrapper.style.width='100%';
  const grid = document.createElement('div'); grid.className='memory-grid';

  // We'll create variants by applying CSS filters to same image so visuals vary: moon, planet (hue), meteor (contrast)
  const variants = [
    {id:'moon', style:`filter: none;`},
    {id:'planet', style:`filter: hue-rotate(40deg) saturate(1.1) brightness(0.98);`},
    {id:'meteor', style:`filter: sepia(0.2) contrast(1.1) saturate(0.9);`},
    {id:'sun', style:`filter: hue-rotate(-20deg) saturate(1.3) brightness(1.02);`}
  ];

  let deck = [];
  variants.forEach(v=>{ deck.push(v); deck.push(v); });
  deck = deck.sort(()=>Math.random()-0.5);

  let first=null, second=null, lock=false, matches=0;
  deck.forEach((cardObj, idx)=>{
    const c = document.createElement('div'); c.className='card'; c.setAttribute('data-key', cardObj.id);
    c.addEventListener('click', ()=>{
      if(lock || c.classList.contains('revealed') || c.classList.contains('matched')) return;
      reveal(c, cardObj);
      if(!first) first={el:c,key:cardObj.id};
      else if(!second){
        second={el:c,key:cardObj.id};
        if(first.key===second.key){
          first.el.classList.add('matched'); second.el.classList.add('matched'); matches++; first=null; second=null;
          if(matches===variants.length){
            showConfetti();
            const done=document.createElement('div'); done.textContent='üéâ Gefeliciteerd ‚Äî match compleet!'; done.style.marginTop='8px'; done.style.fontWeight=700; wrapper.appendChild(done);
          }
        } else {
          lock=true; setTimeout(()=>{ hideCard(first.el); hideCard(second.el); first=null; second=null; lock=false; }, 900);
        }
      }
    });
    grid.appendChild(c);
  });

  wrapper.appendChild(grid);
  const info = document.createElement('div'); info.style.fontSize='13px'; info.style.color='#cfcfbf'; info.style.marginTop='8px';
  info.textContent='Memory ‚Äî zoek de paren in verschillende gloeiende vormen.';
  wrapper.appendChild(info);
  gameArea.appendChild(wrapper);

  function reveal(el, cardObj){
    el.classList.add('revealed');
    const img = document.createElement('div');
    img.style.width='94%'; img.style.height='94%'; img.style.borderRadius='8px';
    img.style.backgroundImage = `url("${supermoonURL}")`;
    img.style.backgroundSize = 'cover';
    img.style.backgroundPosition = 'center';
    img.style = img.style.cssText + cardObj.style;
    el.innerHTML = ''; el.appendChild(img);
  }
  function hideCard(el){ el.classList.remove('revealed'); el.innerHTML=''; }
}

/* ---- Puzzle (3x3 sliding) using the supermoon but split; add gentle animations on rotate) --- */
function initPuzzle(){
  const wrapper = document.createElement('div');
  const puzzleWrap = document.createElement('div'); puzzleWrap.className = 'puzzle-wrap';
  const board = document.createElement('div'); board.className = 'puzzle-board';

  const size = 3; const total = size*size;
  // create tile positions 0..8
  let tiles = Array.from({length:total},(_,i)=>i);

  // shuffle preserving solvability
  function shuffleTiles(){
    do { tiles = tiles.sort(()=>Math.random()-0.5); } while(!isSolvable(tiles));
    if(tiles[tiles.length-1] !== total-1){ const idx = tiles.indexOf(total-1); tiles.splice(idx,1); tiles.push(total-1); }
  }
  function isSolvable(arr){
    const a = arr.filter(v=>v!==total-1);
    let inv=0; for(let i=0;i<a.length;i++) for(let j=i+1;j<a.length;j++) if(a[i]>a[j]) inv++;
    return inv%2===0;
  }
  shuffleTiles();

  function render(){
    board.innerHTML = '';
    const imgSize = 300; // used for background-size
    for(let i=0;i<total;i++){
      const v = tiles[i];
      const tile = document.createElement('div');
      tile.className = (v===total-1) ? 'tile empty' : 'tile';
      if(v!==total-1){
        const col = v % size, row = Math.floor(v/size);
        const posX = - (col*(imgSize/size));
        const posY = - (row*(imgSize/size));
        tile.style.backgroundImage = `url("${supermoonURL}")`;
        tile.style.backgroundSize = `${imgSize}px ${imgSize}px`;
        tile.style.backgroundPosition = `${posX}px ${posY}px`;
        // add a light entrance animation
        tile.style.transition = 'transform 260ms cubic-bezier(.2,.9,.3,1), box-shadow 200ms';
      } else {
        tile.style.background = 'linear-gradient(180deg,#061f18,#052014)';
      }
      tile.addEventListener('click', ()=> tryMove(i));
      board.appendChild(tile);
    }
  }

  function tryMove(index){
    const emptyIdx = tiles.indexOf(total-1);
    const r1 = Math.floor(index/size), c1 = index%size;
    const r2 = Math.floor(emptyIdx/size), c2 = emptyIdx%size;
    const dist = Math.abs(r1-r2)+Math.abs(c1-c2);
    if(dist === 1){
      [tiles[index], tiles[emptyIdx]] = [tiles[emptyIdx], tiles[index]];
      // animate quick scale for clicked tile
      const clicked = board.children[index];
      clicked.style.transform = 'scale(0.98)';
      setTimeout(()=> clicked.style.transform='', 160);
      render();
      if(isSolved()){ showConfetti(); const done = document.createElement('div'); done.textContent='‚ú® Puzzel compleet! ‚ú®'; done.style.marginTop='10px'; done.style.fontWeight=700; wrapper.appendChild(done); }
    }
  }

  function isSolved(){ for(let i=0;i<total;i++) if(tiles[i] !== i) return false; return true; }

  render();
  puzzleWrap.appendChild(board);
  const hint = document.createElement('div'); hint.style.fontSize='13px'; hint.style.color='#cfcfbf'; hint.style.marginTop='8px';
  hint.textContent = 'Schuifpuzzel ‚Äî vorm de supermaan terug.';
  puzzleWrap.appendChild(hint);
  const controls = document.createElement('div'); controls.style.display='flex'; controls.style.gap='8px'; controls.style.marginTop='8px';
  const btnShuffle = document.createElement('button'); btnShuffle.className='btn'; btnShuffle.textContent='Schud';
  btnShuffle.addEventListener('click', ()=> { shuffleTiles(); render(); });
  controls.appendChild(btnShuffle);
  puzzleWrap.appendChild(controls);
  wrapper.appendChild(puzzleWrap);
  gameArea.appendChild(wrapper);
}

/* ---- Sudoku 6x6 (2x3 boxes) ---- */
function initSudoku(){
  const wrapper = document.createElement('div'); wrapper.style.width='100%'; wrapper.style.display='flex'; wrapper.style.flexDirection='column'; wrapper.style.alignItems='center';
  const title = document.createElement('div'); title.textContent='Sudoku (6√ó6) ‚Äî vul de lege vakjes'; title.style.fontWeight='700'; wrapper.appendChild(title);

  const N = 6, boxR = 2, boxC = 3;
  let solution = Array.from({length:N}, ()=>Array(N).fill(0));

  function isSafe(grid,r,c,val){
    for(let i=0;i<N;i++) if(grid[r][i]===val) return false;
    for(let i=0;i<N;i++) if(grid[i][c]===val) return false;
    const startR = r - (r%boxR), startC = c - (c%boxC);
    for(let i=0;i<boxR;i++) for(let j=0;j<boxC;j++) if(grid[startR+i][startC+j]===val) return false;
    return true;
  }

  function fillGrid(grid){
    for(let r=0;r<N;r++){
      for(let c=0;c<N;c++){
        if(grid[r][c]===0){
          const nums = [1,2,3,4,5,6].sort(()=>Math.random()-0.5);
          for(const v of nums){
            if(isSafe(grid,r,c,v)){
              grid[r][c]=v;
              if(fillGrid(grid)) return true;
              grid[r][c]=0;
            }
          }
          return false;
        }
      }
    }
    return true;
  }
  fillGrid(solution);

  function makePuzzle(sol, clues=18){
    let puzzle = sol.map(r=>r.slice());
    const cells=[];
    for(let r=0;r<N;r++) for(let c=0;c<N;c++) cells.push([r,c]);
    cells.sort(()=>Math.random()-0.5);
    let removed=0;
    for(const [r,c] of cells){
      if ((N*N - removed) <= clues) break;
      puzzle[r][c]=0; removed++;
    }
    return puzzle;
  }

  let puzzle = makePuzzle(solution, 18);

  // render grid
  const gridEl = document.createElement('div'); gridEl.className='sudoku-grid'; gridEl.style.marginTop='8px';
  const cellsEls = [];
  for(let r=0;r<N;r++){
    for(let c=0;c<N;c++){
      const wrap = document.createElement('div'); wrap.className='sudoku-cell';
      const val = puzzle[r][c];
      if(val!==0){ wrap.classList.add('prefilled'); wrap.textContent = val; }
      else {
        const input = document.createElement('input'); input.type='number'; input.min=1; input.max=6; input.setAttribute('inputmode','numeric');
        input.addEventListener('input', ()=> { if(input.value) input.value = input.value.replace(/[^1-6]/g,'').slice(0,1); });
        wrap.appendChild(input);
      }
      gridEl.appendChild(wrap); cellsEls.push(wrap);
    }
  }
  wrapper.appendChild(gridEl);

  // controls
  const ctrls = document.createElement('div'); ctrls.className='sudoku-controls';
  const btnCheck = document.createElement('button'); btnCheck.className='btn'; btnCheck.textContent='Controleer';
  const btnHint = document.createElement('button'); btnHint.className='btn'; btnHint.textContent='Hint';
  const btnNew = document.createElement('button'); btnNew.className='btn'; btnNew.textContent='Nieuw';
  const status = document.createElement('div'); status.style.marginTop='8px'; status.style.fontWeight='700';

  btnCheck.addEventListener('click', ()=>{
    let correct=true; let allFilled=true;
    for(let r=0;r<N;r++){
      for(let c=0;c<N;c++){
        const idx = r*N + c; const cell = cellsEls[idx];
        if (puzzle[r][c] !== 0){
          if (solution[r][c] !== puzzle[r][c]) correct=false;
        } else {
          const inp = cell.querySelector('input'); const v = inp.value ? Number(inp.value) : 0;
          if (!v) { allFilled=false; correct=false; cell.style.background='#fff2f2'; }
          else if (v !== solution[r][c]) { correct=false; cell.style.background='#fff2f2'; }
          else { cell.style.background='#e9f7ee'; }
        }
      }
    }
    if (correct && allFilled) { status.textContent = 'üéâ Compleet en correct!'; status.style.color='#1b6e3a'; showConfetti(); }
    else if (!allFilled) { status.textContent = 'Vul alle vakken in (of gebruik een hint).'; status.style.color='#6b3b3b'; }
    else { status.textContent = 'Er staan nog fouten ‚Äî zoek ze even.'; status.style.color='#6b3b3b'; }
  });

  btnHint.addEventListener('click', ()=>{
    const empties=[];
    for(let r=0;r<N;r++) for(let c=0;c<N;c++) if (puzzle[r][c]===0){
      const idx = r*N+c; const cell = cellsEls[idx]; const inp = cell.querySelector('input');
      if (inp && (!inp.value || inp.value==='')) empties.push({r,c,idx});
    }
    if (empties.length===0){ status.textContent='Geen lege vakken meer voor hint.'; return; }
    const pick = empties[Math.floor(Math.random()*empties.length)]; const idx=pick.idx; const cell=cellsEls[idx]; const inp=cell.querySelector('input');
    inp.value = solution[pick.r][pick.c]; cell.style.background='#e9f7ee'; status.textContent='Hint geplaatst.';
  });

  btnNew.addEventListener('click', ()=>{
    solution = Array.from({length:N}, ()=>Array(N).fill(0)); fillGrid(solution);
    puzzle = makePuzzle(solution, 16 + Math.floor(Math.random()*6));
    for(let r=0;r<N;r++){
      for(let c=0;c<N;c++){
        const idx = r*N+c; const cell = cellsEls[idx]; cell.innerHTML=''; cell.classList.remove('prefilled'); cell.style.background='';
        if (puzzle[r][c] !== 0){ cell.classList.add('prefilled'); cell.textContent = puzzle[r][c]; }
        else { const input = document.createElement('input'); input.type='number'; input.min=1; input.max=6; input.setAttribute('inputmode','numeric'); input.addEventListener('input', ()=> { if(input.value) input.value = input.value.replace(/[^1-6]/g,'').slice(0,1);}); cell.appendChild(input); }
      }
    }
    status.textContent='Nieuwe sudoku gegeneerd.';
  });

  ctrls.appendChild(btnCheck); ctrls.appendChild(btnHint); ctrls.appendChild(btnNew);
  wrapper.appendChild(ctrls); wrapper.appendChild(status);
  gameArea.appendChild(wrapper);
}

/* init first game */
initCurrentGame();

/* auto-rotate games every 40s (longer for animations) */
let autoRotate = setInterval(()=> setGame(currentGame+1), 40000);
['nextGame','prevGame','shuffleGame','gameArea'].forEach(id=>{
  document.getElementById(id)?.addEventListener?.('click', ()=> {
    clearInterval(autoRotate);
    setTimeout(()=> { autoRotate = setInterval(()=> setGame(currentGame+1), 40000); }, 60000);
  });
});

/* Keyboard shortcuts */
document.addEventListener('keydown', (e)=>{
  if (e.key === 'ArrowRight') setGame(currentGame+1);
  if (e.key === 'ArrowLeft') setGame(currentGame-1);
  if (e.key === 'ArrowUp') showSign(signIndex-1);
  if (e.key === 'ArrowDown') showSign(signIndex+1);
});

/* -------------------------
   Confetti function (simple particle burst)
   ------------------------- */
function showConfetti(){
  const container = document.getElementById('confetti');
  container.innerHTML = '';
  container.style.display = 'block';
  const colors = ['#ffd766','#e6b46a','#fff6d9','#d4a64b'];
  const count = 40;
  for(let i=0;i<count;i++){
    const el = document.createElement('div');
    el.style.position='absolute';
    el.style.width = (6+Math.random()*8)+'px';
    el.style.height = el.style.width;
    el.style.background = colors[Math.floor(Math.random()*colors.length)];
    el.style.left = (50 + (Math.random()-0.5)*60) + '%';
    el.style.top = '30%';
    el.style.opacity = 0.95;
    el.style.transform = `translate(-50%,-50%) rotate(${Math.random()*360}deg)`;
    el.style.borderRadius = '2px';
    el.style.pointerEvents = 'none';
    container.appendChild(el);

    // animate
    const dx = (Math.random()-0.5)*1200;
    const dy = -600 - Math.random()*800;
    const rot = (Math.random()-0.5)*720;
    el.animate([
      { transform: el.style.transform + ' translate(0px,0px)', opacity:1 },
      { transform: el.style.transform + ` translate(${dx}px,${dy}px) rotate(${rot}deg)`, opacity:0.0 }
    ], { duration: 1400 + Math.random()*800, easing:'cubic-bezier(.15,.7,.4,1)' });
  }
  // hide after animation
  setTimeout(()=> { container.style.display='none'; container.innerHTML=''; }, 2200);
}
</script>
</body>
</html>
